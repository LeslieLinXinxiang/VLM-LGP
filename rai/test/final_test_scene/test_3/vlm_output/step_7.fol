## step_4.fol - Minimal Logic for Multi-Support Assembly (4 Supports)

FOL_World{
  hasWait=false
  gamma = 1.
  stepCost = 1.
  timeCost = 0.
}

## basic predicates
is_gripper
is_object
is_place
is_box     # Base2
is_cylinder # Supports

## state predicates
on
busy
movable

## geometric/logic keywords for multi-support
stableOnMulti

## pruning predicates
INFEASIBLE
INFEASIBLE_pick

## geometric keywords
above
touch
impulse
restingOn
poseEq
push_
stable
stableOn
quasiStaticOn
dynamic
dynamicOn
liftDownUp

## initial state
START_STATE {}

### RULES

DecisionRule pick_cylinder {
  Obj, From, Hand, 
  { (is_gripper Hand) (is_object Obj) (is_cylinder Obj) (on From Obj) (is_place From) (busy Hand)! }
  { (on From Obj)! (above Obj From)! (touch Obj From)! (stable From Obj)! (stableOn From Obj)!  #deletes
    (on Hand Obj) (busy Hand) (movable Obj)  #logic
    (touch Hand Obj) (stable Hand Obj)  #geometric
    }
}


DecisionRule place_on_3_supports { S1, S2, S3, Obj, Hand,

  { 
    (is_gripper Hand), 
    (on Hand Obj), 
    (is_object S1), (is_object S2), (is_object S3) 
  }
  { 
    (on Hand Obj)!, (busy Hand)!, (movable Obj)!,
    (on S1 S2 S3 Obj),
    (stableOnMulti S1 S2 S3 Obj)
  }
}

DecisionRule pick_touch {
  Obj, From, Hand, 
  { (is_gripper Hand) (is_object Obj) (is_cylinder Obj)! (on From Obj) (is_place From) (busy Hand)! }
  { (on From Obj)! (above Obj From)! (touch Obj From)! (stable From Obj)! (stableOn From Obj)!  #deletes
    (on Hand Obj) (busy Hand) (movable Obj)  #logic
    (touch Hand Obj) (stable Hand Obj)  #geometric
    }
}

DecisionRule place_straightOn {
  Obj, Hand, To,
  { (is_gripper Hand) (is_object Obj) (on Hand Obj) (is_place To) (busy Obj)! }
  { (busy Hand)! (on Hand Obj)! (stable Hand Obj)! (touch Hand Obj)! (movable Obj)!  #deletes
    (on To Obj)  #logic
    (stableOn To Obj)  #geometric
    }
}
